<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#2d3436">
<title>âœ¨ ×”×“×¨ - ×—×•×’×’×ª 18</title>
<link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700;900&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --rose-gold: #b76e79;
  --champagne: #f7e7ce;
  --dark-slate: #1e1e24;
  --light-slate: #2d3436;
  --text-light: #fdfbfb;
}

body {
  font-family: 'Heebo', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
  background: radial-gradient(circle at top right, var(--light-slate), var(--dark-slate) 80%);
  color: var(--text-light);
}

/* ========== ELEGANT BACKGROUND PARTICLES ========== */
.particles {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  overflow: hidden;
}

.particle {
  position: absolute;
  background: var(--champagne);
  border-radius: 50%;
  opacity: 0.3;
  animation: floatUp linear infinite;
}

@keyframes floatUp {
  0%   { transform: translateY(100vh) scale(0); opacity: 0; }
  50%  { opacity: 0.6; }
  100% { transform: translateY(-10vh) scale(1.5); opacity: 0; }
}

/* ========== PAGES ========== */
.page {
  position: relative;
  z-index: 1;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 20px;
}

/* ========== WELCOME ========== */
.welcome-top {
  font-size: 24px;
  letter-spacing: 4px;
  margin-bottom: 10px;
  color: var(--champagne);
  font-weight: 300;
  text-transform: uppercase;
}

.number-18 {
  font-size: 140px;
  font-weight: 900;
  line-height: 1;
  background: linear-gradient(135deg, var(--champagne), var(--rose-gold));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  filter: drop-shadow(0 10px 20px rgba(183, 110, 121, 0.3));
  margin-bottom: 10px;
}

.welcome-title {
  font-size: 32px;
  font-weight: 700;
  text-align: center;
  color: var(--text-light);
  margin-bottom: 15px;
  line-height: 1.2;
}

.welcome-sub {
  color: rgba(253, 251, 251, 0.7);
  font-size: 16px;
  text-align: center;
  font-weight: 300;
  max-width: 280px;
  line-height: 1.6;
}

.divider {
  width: 60px;
  height: 2px;
  background: var(--rose-gold);
  margin: 30px auto;
  border-radius: 2px;
}

.scan-btn {
  margin-top: 10px;
  background: linear-gradient(135deg, var(--rose-gold), #9a5b65);
  border: none;
  border-radius: 50px;
  padding: 16px 45px;
  color: white;
  font-family: 'Heebo', sans-serif;
  font-weight: 700;
  font-size: 18px;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(183, 110, 121, 0.4);
  transition: transform 0.2s, box-shadow 0.2s;
}

.scan-btn:active {
  transform: scale(0.96);
}

/* ========== SCANNER ========== */
#scanner-page h2 {
  font-weight: 700;
  font-size: 22px;
  color: var(--champagne);
  text-align: center;
  margin-bottom: 25px;
}

.scanner-container {
  position: relative;
  width: 100%;
  max-width: 320px;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 15px 35px rgba(0,0,0,0.5);
  border: 2px solid rgba(183, 110, 121, 0.5);
  background: #000;
}

#reader {
  width: 100%;
}

/* The Data Laser Effect */
.laser {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 2px;
  background: var(--rose-gold);
  box-shadow: 0 0 15px 2px var(--rose-gold);
  animation: scanLaser 2.5s infinite ease-in-out;
  z-index: 10;
}

@keyframes scanLaser {
  0%   { top: 5%; opacity: 0; }
  10%  { opacity: 1; }
  90%  { opacity: 1; }
  100% { top: 95%; opacity: 0; }
}

.scan-hint {
  color: rgba(253, 251, 251, 0.5);
  font-size: 14px;
  text-align: center;
  margin-top: 20px;
  font-weight: 300;
}

.back-btn {
  margin-top: 30px;
  background: transparent;
  border: 1px solid rgba(253, 251, 251, 0.3);
  border-radius: 30px;
  padding: 12px 35px;
  color: var(--text-light);
  font-family: 'Heebo', sans-serif;
  font-size: 16px;
  cursor: pointer;
}

/* ========== BLESSING ========== */
#blessing-page {
  justify-content: center;
}

/* Elegant Confetti */
.confetti-burst {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.confetti-piece {
  position: absolute;
  top: -10px;
  animation: confettiFall linear forwards;
}

@keyframes confettiFall {
  0%   { transform: translateY(0) rotate(0deg); opacity: 1; }
  100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
}

/* Glassmorphism Card */
.blessing-card {
  position: relative;
  z-index: 2;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 24px;
  padding: 40px 30px;
  max-width: 360px;
  width: 100%;
  box-shadow: 0 25px 50px rgba(0,0,0,0.3);
  animation: cardFadeIn 0.6s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  text-align: center;
}

@keyframes cardFadeIn {
  from { opacity: 0; transform: translateY(30px); }
  to   { opacity: 1; transform: translateY(0); }
}

.blessing-emoji-wrap {
  display: block;
  font-size: 60px;
  margin-bottom: 20px;
  animation: floatEmoji 3s ease-in-out infinite;
}

@keyframes floatEmoji {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-10px); }
}

.gift-tag {
  display: inline-block;
  background: rgba(183, 110, 121, 0.2);
  border: 1px solid var(--rose-gold);
  border-radius: 20px;
  padding: 6px 20px;
  font-size: 14px;
  font-weight: 700;
  color: var(--champagne);
  margin-bottom: 25px;
  letter-spacing: 0.5px;
}

.blessing-text {
  font-size: 18px;
  line-height: 1.7;
  color: var(--text-light);
  font-weight: 300;
}

.scan-again-btn {
  position: relative;
  z-index: 2;
  margin-top: 30px;
  background: var(--text-light);
  color: var(--dark-slate);
  border: none;
  border-radius: 50px;
  padding: 16px 40px;
  font-weight: 700;
  font-size: 16px;
  cursor: pointer;
  width: 100%;
  max-width: 360px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  transition: background 0.3s;
}

.scan-again-btn:active {
  background: var(--champagne);
}
</style>
</head>
<body>

<div class="particles" id="particles-bg"></div>

<div id="welcome-page" class="page">
  <div class="welcome-top">Hadar's Birthday</div>
  <div class="number-18">18</div>
  <h1 class="welcome-title">×™×•× ×”×•×œ×“×ª ×©××— ×”×“×¨!</h1>
  <p class="welcome-sub">×¡×¨×§×™ ××ª ×”×‘×¨×§×•×“ ×©×¢×œ ×”××ª× ×” ×›×“×™ ×œ×’×œ×•×ª ××ª ×”×‘×¨×›×” ×”××™×•×—×“×ª ×©×œ×š.</p>
  <div class="divider"></div>
  <button class="scan-btn" onclick="startScanner()">××¦×œ××” ×œ×¡×¨×™×§×”</button>
</div>

<div id="scanner-page" class="page" style="display:none">
  <h2>×¡×¨×™×§×ª × ×ª×•× ×™×...</h2>
  <div class="scanner-container">
    <div class="laser"></div>
    <div id="reader"></div>
  </div>
  <p class="scan-hint">××¨×›×–×™ ××ª ×”×‘×¨×§×•×“ ×‘×ª×•×š ×”××¡×’×¨×ª</p>
  <button class="back-btn" onclick="stopScanner()">×‘×™×˜×•×œ ×•×—×–×¨×”</button>
</div>

<div id="blessing-page" class="page" style="display:none">
  <div class="confetti-burst" id="confetti-burst"></div>
  <div class="blessing-card">
    <span class="blessing-emoji-wrap" id="blessing-emoji">ğŸ</span>
    <div class="gift-tag" id="gift-name">××ª× ×”</div>
    <p class="blessing-text" id="blessing-text"></p>
  </div>
  <button class="scan-again-btn" onclick="scanAgain()">×¡×¨×§×™ ××ª× ×” × ×•×¡×¤×ª</button>
</div>

<script>
// Generate background particles
const particleContainer = document.getElementById('particles-bg');
for(let i=0; i<15; i++) {
  let p = document.createElement('div');
  p.className = 'particle';
  p.style.width = Math.random() * 8 + 3 + 'px';
  p.style.height = p.style.width;
  p.style.left = Math.random() * 100 + 'vw';
  p.style.animationDuration = Math.random() * 10 + 10 + 's';
  p.style.animationDelay = Math.random() * 5 + 's';
  particleContainer.appendChild(p);
}

// Elegant Confetti Palette
const COLORS = ['#b76e79', '#f7e7ce', '#ffffff', '#e17055'];

function launchConfetti() {
  const burst = document.getElementById('confetti-burst');
  burst.innerHTML = '';
  for (let i = 0; i < 60; i++) {
    let el = document.createElement('div');
    el.className = 'confetti-piece';
    el.style.left = (Math.random() * 100) + 'vw';
    el.style.background = COLORS[Math.floor(Math.random() * COLORS.length)];
    let size = (Math.random() * 8 + 4) + 'px';
    el.style.width = size;
    el.style.height = size;
    el.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    el.style.animationDuration = (Math.random() * 2 + 2.5) + 's';
    el.style.animationDelay = (Math.random() * 0.2) + 's';
    burst.appendChild(el);
  }
}

// The exact data logic mapped beautifully
const blessings = {
  "GIFT-01": { emoji: "â˜ï¸", name: "×›×¨×™×ª ×œ×‘ ×¤×¨×•×•×ª×™×ª",        text: "×©×ª××™×“ ×ª×”×™×™ ××•×§×¤×ª ×‘××”×‘×” â€“ ×¨×›×”, ×¢×•×˜×¤×ª, ×•×‘×œ×™ ×’×‘×•×œ×•×ª." },
  "GIFT-02": { emoji: "ğŸŒ™", name: "×¡×˜ ××¦×¢×™×",                text: "×©×©×•× ××‘×—×Ÿ ××• × ×™×ª×•×— × ×ª×•× ×™× ×œ× ×™×× ×¢ ×××š ×©× ×ª ×œ×™×œ×” ×˜×•×‘×” ×‘×××ª. ×—×œ×•××•×ª ××ª×•×§×™×!" },
  "GIFT-03": { emoji: "âœ¨", name: "××¨××”",                     text: "×©×ª××™×“ ×ª×“×¢×™ ×œ×”×¡×ª×›×œ ×¢×œ ×¢×¦××š ×•×œ×¨××•×ª ×‘×“×™×•×§ ××ª ×”×™×•×¤×™, ×”×—×•×›××” ×•×”×§×¡× ×©×× ×—× ×• ×¨×•××™× ×‘×š." },
  "GIFT-04": { emoji: "ğŸŒ¿", name: "×¢×¦×™×¥",                     text: "×©×ª××©×™×›×™ ×œ×¦××•×—, ×œ×¤×¨×•×— ×•×œ×”×›×•×ª ×©×•×¨×©×™× ×¢××•×§×™× ×©×œ ×¢×¨×›×™×, ×‘×›×œ ××§×•× ×©××œ×™×• ×ª×œ×›×™." },
  "GIFT-05": { emoji: "ğŸ“", name: "××—×‘×¨×ª ×¡×¤×™×¨×œ×” ××¢×•×¦×‘×ª",     text: "×œ×›×ª×•×‘ ××ª ×”×—×œ×•××•×ª, ×”×ª×•×›× ×™×•×ª ×œ×¢×ª×™×“, ×•×›××•×‘×Ÿ â€“ ××ª ×©××™×œ×ª×•×ª ×”×—×™×™× ×©××—×›×•×ª ×œ×š ×‘×—×•×¥." },
  "GIFT-06": { emoji: "ğŸ“", name: "××˜×‘×™ × ×™×™×¨",                text: "×›×œ×™ ×¢×–×¨ ×§×˜×Ÿ ×©×™×¢×–×•×¨ ×œ×š ×œ×”×—×–×™×§ ×”×›×œ ×™×—×“ ×•×œ×©××•×¨ ×¢×œ ×¡×“×¨, ×’× ×›×©×”×©×’×¨×” ×©×œ ×™\"×‘ ×§×¦×ª ××‘×•×œ×’× ×ª." },
  "GIFT-07": { emoji: "ğŸ¨", name: "×’×¨×‘×™×™× ××•×“×¤×¡×™×",           text: "×©×ª××™×“ ×ª×¦×¢×“×™ ×‘×“×¨×›×™× ×¦×‘×¢×•× ×™×•×ª ×•×©××—×•×ª, ×•×ª×©××™×¨×™ ×—×•×ª× ×™×™×—×•×“×™ ×‘×©×™×¨×•×ª ×”×œ××•××™ ×•×‘×›×œ×œ." },
  "GIFT-08": { emoji: "ğŸ§–â€â™€ï¸", name: "××’×‘×ª ×œ×¢×˜×™×¤×ª ×©×™×¢×¨",        text: "×›×™ ×’× ×œ×× ×œ×™×¡×˜×™×ª ×”×›×™ ×—×“×” ×¢×•×‘×“×ª×™×ª ××’×™×¢ ×¨×’×¢ ×©×œ ×¡×¤×, ×©×§×˜ ×•×¤×™× ×•×§ ×‘×¡×•×£ ×”×™×•×." },
  "GIFT-09": { emoji: "ğŸ¤", name: "×—×‘×™×œ×ª ×˜×™×©×™×•",              text: "×œ××—×•×ª ×“××¢×•×ª ×©×œ ×¦×—×•×§, ×©×œ ×”×ª×¨×’×©×•×ª, ×•×œ×¤×¢××™× ×’× ×©×œ ×§×•×©×™ â€“ ×× ×—× ×• ×ª××™×“ ×¤×” ×‘×©×‘×™×œ×š." },
  "GIFT-10": { emoji: "ğŸ«§", name: "×¡×‘×•×Ÿ",                     text: "×©×ª××™×“ ×ª×¨×’×™×©×™ ×¨×¢× × ×”, ××œ××ª ×× ×¨×’×™×”, ×•××•×›× ×” ×œ××ª×’×¨ ×”×‘× ×©×”×—×™×™× ××¦×™×‘×™×." },
  "GIFT-11": { emoji: "ğŸ§", name: "×ª×‘× ×™×ª ××¤×™×™×” ×•×•×¨×•×“×”",       text: "×©×ª××™×“ ×™×”×™×” ×œ×š ×˜×¢× ××ª×•×§ ×‘×—×™×™× (×•×©×œ× ×ª×©×›×—×™ ×œ××¤×•×ª ××©×”×• ×˜×¢×™× ×œ××—×™× ×©×œ×š ×›×©××ª ×‘××” ×œ×‘×§×¨...)." },
  "GIFT-12": { emoji: "ğŸ", name: "×§×•×¤×¡×ª ×¤×— ×¢× ×“×‘×•×¨×™×",      text: "×©×ª×”×™×™ ×—×¨×•×¦×” ×•×—×“×•×¨×ª ××˜×¨×” ×›××• ×“×‘×•×¨×”, ××‘×œ ×ª××™×“ ×ª×“×¢×™ ×’× ×œ×¢×¦×•×¨ ×œ××¡×•×£ ××ª ×”×“×‘×©." },
  "GIFT-13": { emoji: "ğŸ¤", name: "× ×¨×ª×™×§ ×œ×‘×Ÿ ×¢× ×¨×•×›×¡×Ÿ",      text: "××§×•× ×‘×˜×•×— ×œ×©××•×¨ ×‘×• ××ª ×›×œ ×”×“×‘×¨×™× ×”×§×˜× ×™× ×•×”×—×©×•×‘×™× ×©×™×œ×•×• ××•×ª×š ×‘×¤×¨×§ ×”×—×“×© ×©×œ ×—×™×™×š." },
  "GIFT-14": { emoji: "ğŸ¿ï¸", name: "×‘×•×‘×ª ×¡× ××™",                text: "×›×™ ×›×•×œ× ×• ×¦×¨×™×›×™× ×œ×¤×¢××™× ××©×”×• ×§×˜×Ÿ ×œ×—×‘×§, ×’× ×›×©×× ×—× ×• ×›×‘×¨ ×—×•×§×™×™× ×‘× ×™ 18." },
  "GIFT-15": { emoji: "âœ¡ï¸", name: "×ª×’×™×•×ª ×¢× ×™×©×¨××œ ×—×™",       text: "×”××¦×¤×Ÿ ×©×œ×š. ×©×ª××™×“ ×ª×–×›×¨×™ ×××™×¤×” ×‘××ª, ××”× ×”×¢×¨×›×™× ×©×œ× ×•, ×•××™ ×©×•××¨ ×¢×œ×™×™×š ××œ××¢×œ×”." },
  "GIFT-16": { emoji: "ğŸ’†â€â™€ï¸", name: "××¡××’'×¨",                   text: "×œ×©×—×¨×¨ ××ª ×›×œ ×”×œ×—×¥ ×©×œ ×”×‘×’×¨×•×™×•×ª! ×× ×™ ×—×•×ª× ×œ×š ××§×¦×•×¢×™×ª â€“ ×”×ª×•×¦××•×ª ×©×œ×š ×™×”×™×• ××¢×•×œ×•×ª." },
  "GIFT-17": { emoji: "ğŸ«", name: "×©×•×§×•×œ×“ ×§×™× ×“×¨ ×‘×•×× ×• ×œ×‘×Ÿ",  text: "×§×¦×ª ×× ×¨×’×™×” ××ª×•×§×”. ×›×™ ×œ×¤×¢××™× ×¦×¨×™×š ×œ×¢×©×•×ª ×”×¤×¡×§×” ××›×œ ×”× ×ª×•× ×™×, ×”××‘×—× ×™× ×•×”×œ×—×¥, ×•×œ×”×ª×¤× ×§ ×¢×œ ××•×©×¨ ×˜×”×•×¨." },
  "GIFT-18": { emoji: "ğŸ‘£", name: "×›×¤×›×¤×™ ×˜×‘×¢ × ××•×ª",           text: "×œ×¦×¢×•×“ ×‘×‘×™×˜×—×•×Ÿ, ×‘× ×•×—×•×ª ×•×‘×’××•×•×” ×™×©×¨××œ×™×ª ××œ ×¢×‘×¨ ×”×©×™×¨×•×ª ×”×œ××•××™. ×”×›×™ ×—×©×•×‘ ×©×™×”×™×” ×œ×š ×‘×¡×™×¡ ×™×¦×™×‘ ×‘×—×™×™×." },
  "GIFT-19": { emoji: "âœ¨", name: "×¦××™×“ ×•×¢×’×™×œ×™×",             text: "×ª×–×›×•×¨×ª × ×•×¦×¦×ª ×œ×›×š ×©×”×¢×¨×š ×”×××™×ª×™ ×©×œ×š ×ª××™×“ ××’×™×¢ ××‘×¤× ×™×. ×©×ª××™×“ ×ª×–×¨×—×™ ×•×ª××™×¨×™ ××ª ×”×¡×‘×™×‘×” ×©×œ×š, ×‘×“×™×•×§ ×›××• ×©××ª." }
};

let html5QrcodeScanner = null;
let isScanning = false;

function showPage(id) {
  document.querySelectorAll('.page').forEach(page => page.style.display = 'none');
  document.getElementById(id).style.display = 'flex';
}

function startScanner() {
  showPage('scanner-page');
  isScanning = false;
  document.getElementById('reader').innerHTML = '';

  html5QrcodeScanner = new Html5Qrcode("reader");

  html5QrcodeScanner.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: { width: 250, height: 180 } },
    (decodedText) => {
      if (isScanning) return;
      isScanning = true;

      const code = decodedText.trim();

      // Professional proper Promise resolution to prevent camera freezing
      html5QrcodeScanner.stop().then(() => {
        html5QrcodeScanner.clear();
        setTimeout(() => showBlessing(code), 200);
      }).catch((err) => {
        console.error("Failed to stop scanner smoothly", err);
        setTimeout(() => showBlessing(code), 200);
      });
    },
    (errorMessage) => {
      // Ignore background scan errors
    }
  ).catch((err) => {
    alert("× × ×œ××©×¨ ×’×™×©×” ×œ××¦×œ××” ×›×“×™ ×œ×¡×¨×•×§ ××ª ×”××ª× ×•×ª.");
    showPage('welcome-page');
  });
}

function stopScanner() {
  if (html5QrcodeScanner) {
    html5QrcodeScanner.stop().then(() => {
      html5QrcodeScanner.clear();
      showPage('welcome-page');
    }).catch(err => {
      showPage('welcome-page');
    });
  } else {
    showPage('welcome-page');
  }
}

function showBlessing(code) {
  const gift = blessings[code];
  if (!gift) {
    alert("×”×‘×¨×§×•×“ ×œ× ×–×•×”×” ×‘××¢×¨×›×ª. × ×¡×™ ×©×•×‘!");
    isScanning = false;
    startScanner();
    return;
  }

  document.getElementById('blessing-emoji').textContent = gift.emoji;
  document.getElementById('gift-name').textContent = gift.name;
  document.getElementById('blessing-text').textContent = gift.text;

  showPage('blessing-page');
  setTimeout(launchConfetti, 150);
}

function scanAgain() {
  startScanner();
}
</script>
</body>
</html>
